<html>
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
</head>
<body>

Search the folders to index and scan : <input type="text" id="folderValue" name="folderValue"  >
<button type="button" name="Search folder" onclick="submitSearch()" value="Search folder">Search Folder</button>
<br>
Submit all folders to scan <button type="button" name="Scan folder" onclick="submitScan()" value="Scan folder">Scan Folder</button>



<div>
    <input class="search-input form-control">
</div>



<div id="jstree">
</div>


<script>
   function submitSearch() {
       $(function () {

           $.jstree.destroy();

           $(".search-input").keyup(function () {

               var searchString = $(this).val();
           //    console.log(searchString);
               $('#jstree').jstree('search', searchString);
           });
           var folderValue =$("#folderValue").val();
         //  console.log(folderValue);

           $.ajax({
               dataType: "json",
               url: "browse?value=" + folderValue,
               type: 'GET',
               success: function (jsondata, codeHttp) {
                   console.log(codeHttp);
                   console.log(jsondata);
                   if (codeHttp == 'success') {
                       $('#jstree').jstree({
                           'core': {
                               'data': jsondata
                           },
                           "checkbox": {
                               "keep_selected_style": false
                           },
                           "search": {
                               "case_insensitive": true,
                               "show_only_matches": true
                           },
                           "plugins": ["checkbox", "search"]
                       });
                   }
               }
           });
       });
   }

   function submitScan() {

       var checked = $('#jstree').jstree(true).get_selected();

       console.log(checked);
   }
</script>

</body>
</html>